# 进程，线程和协程
#### 1.进程
```js
进程是程序的一次执行过程，是程序在执行过程中的分配和管理资源的基本单位
每个进程都有自己的地址空间
线程至少有 5 种状态：初始态、执行态、等待态、就绪态、终止态
进程的作用：
  - 任务的调度执行基本单位
  - 资源的所有权

1. 进程是操作系统资源调度的基本单位
2. 进程都有自己的独立数据空间，程序之间的切换开销大
3. 进程拥有各自独立的地址空间、资源，所以共享复杂，需要用IPC（Inter-Process Communication，进程间通信），但是同步简单

进程和线程的关系
1. 进程中的任意一线程执行出错，都会导致整个进程的崩溃
2. 线程之间共享进程中的数据
3. 当一个进程关闭之后，操作系统会回收进程所占用的内存
4. 进程之间的内容相互隔离
```
---
#### 2.线程
```js
线程是CPU调度和分派的基本单位，它可以和同一进程下的其他线程共享全部资源
线程由进程来启动和管理的

1. 线程是任务的调度执行的基本单位
2. 线程也有自己的运行栈和程序计数器，线程间的切换开销较小
3. 而线程共享所属进程的资源，因此共享简单，但是同步复杂，需要用加锁等措施

设计线程的原因：
操作系统模型中，进程有两个功能：
  1、任务的调度执行基本单位
  2、资源的所有权

线程的出现就是将这两个功能分离开来了：thread 执行任务的调度和执行； process 资源所有权

这样的好处是：操作系统中有两个重要概念：并发和隔离
  并发：提高硬件利用率，进程的上下文切换比线程的上下文切换效率低，所以线程可以提高并发的效率
  隔离：计算机的资源是共享的，当程序发生奔溃时，需要保证这些资源要被回收，进程的资源是独立的，奔溃时不会影响其他程 序的进行，线程资源是共享的，奔溃时整个进程也会奔溃

线程利于并发
进程利于隔离

```
---
#### 3.协程
```js
协程是一种用户态的轻量级线程，协程的调度完全由用户控制
协程拥有自己的寄存器上下文和栈。
协程调度切换时，将寄存器上下文和栈保存到其他地方，在切回来的时候，恢复先前保存的寄存器上下文和栈，直接操作栈则基本没有内核切换的开销，可以不加锁的访问全局变量，所以上下文的切换非常快

1. 一个线程可以多个协程，一个进程也可以单独拥有多个协程，这样python中则能使用多核CPU。
2. 线程进程都是同步机制，而协程则是异步
3. 协程能保留上一次调用时的状态，每次过程重入时，就相当于进入上一次调用的状态
```
---
