1. nodejs原理
  - nodejs特点：
    - 单线程
    - 异步I/O
    - 事件驱动
    - NodeJS适合运用在高并发、I/O密集、少量业务逻辑的场景
  - 单线程的好处
    - 单线程的最大好处，是不用像多线程编程那样处处在意状态的同步问题，这里没有死锁的存在，也没有线程上下文切换所带来的性能上的开销
  - 事件驱动
    - 事件驱动编程，为需要处理的事件编写相应的事件处理程序。代码在事件发生时执行
  - 原理
    - Node.js的单线程并不是真正的单线程，只是开启了单个线程进行业务处理（cpu的运算），同时开启了其他线程专门处理I/O。
    - 当一个指令到达主线程，主线程发现有I/O之后，直接把这个事件传给I/O线程，不会等待I/O结束后，再去处理下面的业务，而是拿到一个状态后立即往下走，这就是“单线程”、“异步I/O”。 
    - I/O操作完之后呢？Node.js的I/O 处理完之后会有一个回调事件，这个事件会放在一个事件处理队列里头，
    - 在进程启动时node会创建一个类似于While(true)的循环，它的每一次轮询都会去查看是否有事件需要处理，是否有事件关联的回调函数需要处理，如果有就处理，然后加入下一个轮询，
    - 如果没有就退出进程，这就是所谓的“事件驱动”。这也从Node的角度解释了什么是”事件驱动”。 
    - 在node.js中，事件主要来源于网络请求，文件I/O等，根据事件的不同对观察者进行了分类，有文件I/O观察者，网络I/O观察者。
    - 事件驱动是一个典型的生产者/消费者模型，请求到达观察者那里，事件循环从观察者进行消费，主线程就可以马不停蹄的只关注业务不用再去进行I/O等待

2. I/O线程是怎样的
  - 异步IO是指操作系统提供的IO（数据进出）的能力，比如键盘输入，对应到显示器上会有专门的数据输出接口，这就是我们生活中可见的IO能力
  - 这个接口在向下会进入到操作系统这个层面，在操作系统中，会提供诸多的能力，比如：磁盘的读写，DNS的查询，数据库的连接啊，网络请求的处理，等等


3. 事件循环队列 event-loop
  - 进入 timers 阶段
  - 进入IO callbacks阶段
  - 进入 idle，prepare 阶段
  - 进入 poll 阶段
  - 进入 check 阶段
  - 进入 closing 阶段

4. node中间件
  - 就是在收到请求后和发送响应之前这个阶段执行的一些函数
  - 在处理完成后需要执行 next() 才能正确返回

5. express和koa的区别
  - koa是一个比express更精简，使用node新特性的中间件框架
  - 路由：express是集成的，koa需要引入中间件
  - 中间件：koa是洋葱圈模型
  - koa通过组合不同的 generator，可以免除重复繁琐的回调函数嵌套，并极大地提升错误处理的效率，中间件就是如此